# NS-3 无人机集群通信仿真参数解析

## 总体仿真配置


| **参数类别** | **参数名称**     | **参数值/描述**                | **备注**                      |
| ------------ | ---------------- | ------------------------------ | ----------------------------- |
| 仿真时长     | `SimulationTime` | 100秒                          | 仿真在`Seconds(100.0)` 处停止 |
| 节点数量     | `Nodes`          | 20个                           | 通过`NodeContainer` 创建      |
| 随机种子     | `RandomStream`   | 固定流（`rand->SetStream(1)`） | 确保实验可重复性              |

---

## 移动模型配置（Gauss-Markov 3D）


| **参数名称** | **参数值/描述**                                                                  | **备注**                                                     |
| ------------ | -------------------------------------------------------------------------------- | ------------------------------------------------------------ |
| 初始位置分配 | X:`[0.0, 1000.0]`，Y: `[0.0, 1000.0]`，Z: `[0.0, 200.0]`                         | 通过`RandomBoxPositionAllocator` 均匀分配初始位置            |
| 移动范围     | X:`[0, 500]`，Y: `[0, 500]`，Z: `[0, 100]`                                       | 移动被限制在此立方体内                                       |
| 时间步长     | `TimeStep = 1.0秒`                                                               | 每隔1秒更新一次速度和方向                                    |
| 速度相关参数 | `Alpha=0.7`，`MeanVelocity=Uniform[10.0,20.0] m/s`，`NormalVelocity=Normal(0,1)` | Alpha控制历史依赖权重，速度均值为10-20 m/s，扰动服从正态分布 |
| 方向相关参数 | `MeanDirection=Uniform[0,6.283]`，`NormalDirection=Normal(0,0.5)`                | 方向均值为随机角度，扰动方差为0.5                            |
| 俯仰角参数   | `MeanPitch=0`，`NormalPitch=Normal(0,0.1)`                                       | 俯仰角均值为0（水平飞行），扰动方差为0.1                     |

---

## 通信协议配置


| **协议层**   | **参数名称**    | **参数值/描述** | **备注**                           |
| ------------ | --------------- | --------------- | ---------------------------------- |
| 物理层 (PHY) | `Standard`      | 802.11ac        | 支持高频宽通信                     |
|              | `TxPower`       | 28 dBm          | 固定发射功率                       |
|              | `RxSensitivity` | -90 dBm         | 接收灵敏度，影响通信范围           |
|              | `DataMode`      | `VhtMcs0`       | 固定调制编码方案，速率约为6.5 Mbps |
| MAC层        | `Mode`          | Adhoc (CSMA/CA) | 无中心协调，竞争接入信道           |
| 网络层       | IP分配          | `10.0.0.0/24`   | 通过`Ipv4AddressHelper` 分配       |
| 传输层       | Protocol        | TCP             | 使用`TcpSocketFactory`             |

---

## 应用层配置


| **参数名称** | **参数值/描述**                         | **备注**                          |
| ------------ | --------------------------------------- | --------------------------------- |
| 接收端       | `PacketSink`，端口 `9999`               | 所有节点安装接收端，持续运行100秒 |
| 发送端       | `OnOffApplication`                      | 随机触发TCP数据流                 |
| 发送触发概率 | 每秒50%概率（`rand->GetValue() < 0.5`） | 注释中误写为20%，实际代码为50%    |
| 发送时间窗口 | 启动时间`t秒`，持续时间 `0.02秒`        | 确保短时间内发送单个数据包        |
| 数据包大小   | 512 Bytes                               | 固定包大小                        |
| 数据速率     | 10 Mbps                                 | 高数据速率确保快速发送            |

---

## 拓扑变化与事件记录


| **参数名称** | **参数值/描述**                                                          | **备注**                                |
| ------------ | ------------------------------------------------------------------------ | --------------------------------------- |
| 拓扑统计时隙 | 每10秒输出一次（`Simulator::Schedule`）                                  | 统计区间为`0-10s, 10-20s, ..., 90-100s` |
| 链路判定规则 | 若节点A与B在10秒内有通信记录（数据或ACK），则认为链路存在                | 通过`g_intervalLinks` 记录节点对        |
| 事件记录文件 | `node-transmissions.txt`（传输事件），`topology-changes.txt`（拓扑变化） | 记录时间、节点ID、事件类型（Tx/Rx）     |

---

## 关键逻辑说明

### 1. 节点移动性

- **初始位置**：随机分布在较大范围（X/Y 0-1000米，Z 0-200米），但移动被限制在更小范围（X/Y 0-500米，Z 0-100米）
- **动态行为**：方向、速度和俯仰角通过高斯-马尔可夫模型动态更新，公式为：\( v_{t+1} = \alpha v_t + (1-\alpha)\mu_v + \sqrt{1-\alpha^2}\sigma_v \)
  - \( \alpha=0.7 \): 历史速度权重
  - \( \mu_v \): 速度均值（10-20 m/s）
  - \( \sigma_v \): 扰动方差（1.0）

### 2. 通信触发机制

- **随机性**：每秒有50%概率触发随机节点对通信
- **短时传输**：发送窗口仅0.02秒，模拟突发性通信
- **TCP可靠性**：通过ACK确认机制保证数据传输，但未显式处理丢包重传

### 3. 物理层覆盖范围估算

- **自由空间模型**：路径损耗公式 \( L = 20\log_{10}(d) + 20\log_{10}(f) - 147.55 \)
  - 发射功率 \( P_{tx} = 28\ \text{dBm} \)
  - 接收灵敏度 \( P_{rx} = -90\ \text{dBm} \)
  - 中心频率 \( f = 5\ \text{GHz} \)（802.11ac典型值）
- **理论通信半径**：
  \( d = 10^{\frac{P_{tx} - P_{rx} - 20\log_{10}(f) + 147.55}{20}} \approx 317\ \text{米} \)

### 4. 拓扑统计局限性

- **推断逻辑**：基于应用层通信记录，可能低估实际物理连通性
- **隐藏节点问题**：未通过RTS/CTS机制处理，实际MAC层冲突未被统计
- **移动性影响**：10秒统计间隔可能无法捕捉快速拓扑变化
